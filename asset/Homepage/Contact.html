<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <title>Liên hệ - Thư viện Bách Khoa</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../style/HomePage/Homepage.css">
</head>
<body>
    <header class="header"></header>

    <div class="page-container">
        <h1 class="page-title">Liên hệ với chúng tôi</h1>
        <div class="content-box">
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Thông tin liên lạc</h3>
                    <p style="margin-top:15px; color:#64748b;">Giải đáp thắc mắc về tài khoản, lỗi hệ thống hoặc quy trình mượn trả.</p>
                    <ul style="margin-top:20px; list-style:none;">
                        <li style="margin-bottom:15px"><i class="fa-solid fa-location-dot" style="color:var(--accent-color); width:25px"></i> Số 1 Đại Cồ Việt, HBT, Hà Nội</li>
                        <li style="margin-bottom:15px"><i class="fa-solid fa-phone" style="color:var(--accent-color); width:25px"></i> (024) 3869 2243</li>
                        <li><i class="fa-solid fa-envelope" style="color:var(--accent-color); width:25px"></i> library@hust.edu.vn</li>
                    </ul>
                </div>
                <div class="contact-form">
                    <h3>Gửi tin nhắn</h3>
                    
                    <form style="margin-top:15px;" id="contact-form">
                        <div class="input-group">
                            <input type="text" id="c-name" placeholder="Họ và tên của bạn" required>
                        </div>
                        <div class="input-group">
                            <input type="email" id="c-email" placeholder="Email liên hệ" required>
                        </div>
                        <div class="input-group">
                            <textarea id="c-message" placeholder="Nội dung cần hỗ trợ..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%" id="btn-submit">Gửi tin nhắn</button>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <footer class="footer"></footer>
    
    <script type="module">
        // 1. Import SharedUI (Kiểm tra lại tên file SharedUI.js hay ShareUI.js)
        import { initSharedUI } from '../../script/ShareUI.js'; 
        // 2. Import API (QUAN TRỌNG)
        import contactApi from '../../api/contactAPI.js'; 

        document.addEventListener('DOMContentLoaded', () => {
            initSharedUI();

            const contactForm = document.getElementById('contact-form');
            const btnSubmit = document.getElementById('btn-submit');

            if (contactForm) {
                contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault(); 
                    
                    // Lấy dữ liệu
                    const full_name = document.getElementById('c-name').value;
                    const email = document.getElementById('c-email').value;
                    const message = document.getElementById('c-message').value;

                    // UX: Disable nút để tránh bấm nhiều lần
                    const originalText = btnSubmit.innerText;
                    btnSubmit.innerText = "Đang gửi...";
                    btnSubmit.disabled = true;

                    try {
                        // GỌI API THẬT
                        await contactApi.submit({ full_name, email, message });
                        
                        alert("Gửi liên hệ thành công! Chúng tôi sẽ phản hồi sớm.");
                        contactForm.reset(); // Xóa trắng form

                    } catch (error) {
                        console.error(error);
                        alert("Lỗi gửi tin nhắn: " + (error.response?.data?.message || error.message));
                    } finally {
                        // Mở lại nút
                        btnSubmit.innerText = originalText;
                        btnSubmit.disabled = false;
                    }
                });
            }
        });
    </script>
</body>
</html>